0 CLS0:DIMF(10,10),K(255),A(2000),B(4),J,B,L,C:B(1)=-1:B(2)=1:B(3)=-32:B(4)=32:K(65)=-1:K(83)=1:K(87)=-32:K(90)=32:D=1:GOTO9
1 C=F(X-1,Y-1)+F(X,Y-1)+F(X+1,Y-1)+F(X-1,Y)+F(X+1,Y)+F(X-1,Y+1)+F(X,Y+1)+F(X+1,Y+1)+48:RETURN
2 SOUND99,1:I=0:FORY=1TO9:FORX=1TO9:IFPEEK(32*Y+X+M)=46THENI=I+1:IFF(X,Y)=1THENPOKE32*Y+X+M,42:NEXT:NEXT:ONDGOTO4:RETURN
3 POKE32*Y+X+M,46:NEXT:NEXT:FORJ=1TO10:F(RND(9),RND(9))=1:NEXT:ONDGOTO4:RETURN
4 POKEP,PEEK(P)+64:K=ASC(INKEY$+"@"):POKEP,PEEK(P)-64:ON-(K=0ORPEEK(P+K(K))=128)GOTO4:P=P+K(K):L=1:B=1:A(B)=P:IFK>32THEN4
5 Y=INT((A(B)-M)/32):X=(((A(B)-M)/32)-Y)*32:IFF(X,Y)=1THEND=2:ON-(P=A(B))GOTO9:D=1:FORJ=1TO1:GOTO8
6 GOSUB1:IFC<>48THENPOKEA(B),C:FORJ=1TO1:GOTO8
7 POKEA(B),32:FORJ=1TO4:IFPEEK(A(B)+B(J))=46THENL=L+1:A(L)=A(B)+B(J):POKEA(L),32
8 NEXT:B=B+1:ON-(B<=L)GOTO5:GOTO4
9 M=16384:P=33+M:ONDGOTO2:?@416,"SAFE!":IFI<>10THEN?@416,"BOOM!":SOUND1,1:POKE49151,64
